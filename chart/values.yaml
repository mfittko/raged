api:
  image:
    repository: your-registry/rag-api
    tag: "0.5.0"
    pullPolicy: IfNotPresent
  replicas: 2
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  env:
    # Legacy env vars for backward compatibility (API not yet migrated to Postgres)
    # These will be removed once API migration is complete
    QDRANT_COLLECTION: "docs"
    VECTOR_SIZE: "768"
    DISTANCE: "Cosine"
    EMBED_MODEL: "nomic-embed-text"
    CORS_ORIGIN: ""
    RATE_LIMIT_MAX: "100"
    TRUST_PROXY: "false"
  auth:
    enabled: true
    token: ""
  service:
    port: 8080
  ingress:
    enabled: false
    className: ""
    host: rag.local
    path: /
    annotations: {}
    tls:
      enabled: false
      secretName: ""

indexer:
  enabled: false
  image:
    repository: your-registry/rag-index
    tag: "0.5.0"
    pullPolicy: IfNotPresent
  repoUrl: ""
  repoId: ""
  branch: ""
  collection: "docs"
  token: ""
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Postgres 17 with pgvector extension for vector storage, graph data, and task queue
postgres:
  image: pgvector/pgvector:17-pg17
  user: "rag"
  password: ""
  database: "ragstack"
  storage:
    size: 20Gi
    storageClassName: ""
  service:
    port: 5432

# Temporary migration controls while API/worker images are being moved to Postgres.
# Explicit opt-in prevents shipping chart defaults that appear compatible but fail at runtime.
migration:
  allowBrokenLegacyRuntime: false

ollama:
  enabled: true
  image: ollama/ollama:latest
  storage:
    size: 30Gi
    storageClassName: ""
  service:
    port: 11434

enrichment:
  enabled: false
  worker:
    image:
      repository: your-registry/rag-worker
      tag: "1.0.0"
      pullPolicy: IfNotPresent
    replicas: 1
    concurrency: 4
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 1000m
        memory: 1Gi
    extractor:
      provider: "ollama"
      modelFast: "llama3"
      modelCapable: "llama3"
      modelVision: "llava"
      anthropicApiKey: ""
      openaiApiKey: ""

# Optional S3-compatible blob storage for large files (SeaweedFS)
seaweedfs:
  enabled: false
  image: chrislusf/seaweedfs:3.80
  accessKey: ""
  secretKey: ""
  bucket: "rag-raw"
  storage:
    size: 20Gi
    storageClassName: ""
  service:
    s3Port: 8333
    masterPort: 9333
